# Прототип сервера интернет-магазина
В репозитории написана серверная часть интернет-магазина. Реализован следующий функционал:
1. Создание, чтение, обновление, удаление категорий. Есть возможность создания вложенных категорий друг в друга.
2. Создание, чтение, обновление, удаление товаров, отзывов, характеристик, значений характеристик, заказов.
3. Добавление и удаление фотографий к отзывам, категориям и товарам.
4. Добвление товаров в корзину и удаление из неё.
5. Назначение новых администраторов.
6. Создание и обработка заказов.
7. Авторизация и аутентификация по JWT-токену.
8. Пагинация и фильтрация товаров.

## Технологии
- Maven;
- Lombok;
- Spring MVC;
- Spring Data JPA;
- Spring Boot;
- Spring Security;
- JWT;
- Swagger UI;
- Hibernate;
- PostgreSQL;
- JUnit 5;
- Mockito;
- Docker.

## Структура БД
![model_bd](https://github.com/vvnuts/web_shop/assets/142222258/d23a05ca-5d7e-45a4-a0c1-c3a17f9dc7eb)

## Установка
Клонируем проект к себе на компьютер с помощью команды:
```
git clone https://github.com/vvnuts/web_shop.git
```
После чего выбираем ветку backend:
```
git checkout origin/backend
```
Или качаем zip-архив из ветки backend.
### Запуск через docker desktop
1. Запускаем приложение docker desktop.
2. Открываем терминал.
3. Пишем путь до папки shop:
   ```
   cd C:\путь к директориям\web_shop\shop
   ```
4. Пишем в терминале команду:
   ```
   docker-compose build
   ```
5. После того как контейнер будет создан пишем команду:
   ```
   docker-compose up
   ```
6. Приложение запущено!

### Запуск через среду разработки
1. Создаете новую базу данных.
2. Запускаете папку shop через вашу среду разработки.
3. В файле application.properties указываете свои данные для подключения к БД.
4. Запускаете ShopApplication

## Тестирование
Протестировать функционал приложения вы можете с помощью Swagger UI. Для этого запустите приложение и перейдите по ссылке:
```
http://localhost:8080/swagger-ui/index.html#/
```
Здесь перечислены все запросы к серверу. Среди методов есть доступные всем посетителям сайта, только зарагестрированным пользователям и только администратору. Пройти аутентификацию можно с помощью метода 
api/v1/auth/authenticate
```
Админ: 
email: johndoe@example.com
password: password1

Обычный юзер1:
email: janesmith@example.com
password: password2

Обычный юзер2:
email: michaeljohnson@example.com
password: password3

Обычный юзер3:
email: emilywilliams@example.com
password: password4
```
Также роль юзера можно получить зарегистрировавшись.

Полученный jwt-токен можно, нажав на значок замка, сохранить и он автоматически будет отправляться вместе с каждым вашим запросом.

